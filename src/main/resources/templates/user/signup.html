<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!--    <link rel="stylesheet" href="/static/css/user/login.css"/>-->
    <title>회원가입</title>
</head>
<body>
<!-- Optional JavaScript -->

<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.7/dist/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
<script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=a3660f8de5e77b73f4c7822adeb86bec&libraries=services"></script>
<script>
    // 상품 이미지 미리 보기
    function previewImage() {
        const file = $("#image")[0].files[0];
        // 웹은 문자열 기반이라 바이너리 데이터를 주고받으려면 base64 방식으로 인코딩을 한다.
        // 자바스크립트의 FileReader 내장 객체를 생성
        const reader = new FileReader();
        // file 객체를 base64 방식으로 인코딩해서 result 속성에 저장
        reader.readAsDataURL(file);
        reader.onload = function() {
            $('#preview').attr("src", reader.result);
        }
        return true;
    }
    $(document).ready(function() {
        $('#image').change(previewImage);
    })

</script>

<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">회원가입</button>

<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div style="height: 1750px" class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title" id="exampleModalCenterTitle">회원가입</h2>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div style="height: 500px" class="member_signup">
                <form style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center" th:action="@{/auth/loginProc}" th:method="POST">

                        <div style="display: flex; justify-content: center; margin-top: 30px" class="member_email_input">
                            <input style="width: 300px; height: 40px; border-radius: 80px; padding-left: 15px" type="text" name="email" placeholder="이메일">
                        </div>

                        <div style="display: flex; justify-content: center; margin-top: 30px" class="member_password_input">
                            <input style="width: 300px; height: 40px; border-radius: 80px; padding-left: 15px" type="password" name="password" placeholder="비밀번호">
                        </div>

                        <div style="display: flex; justify-content: center; margin-top: 30px" class="member_name_input">
                            <input style="width: 300px; height: 40px; border-radius: 80px; padding-left: 15px" type="text" name="name" placeholder="이름">
                        </div>

                        <div style="display: flex; justify-content: center; margin-top: 30px" class="member_nickname_input">
                            <input style="width: 300px; height: 40px; border-radius: 80px; padding-left: 15px" type="text" name="nickname" placeholder="닉네임">
                        </div>

                        <form style="display: flex; justify-content: center; margin-top: 30px" class="add_image">
                            <p style="width: 300px; height: 40px; padding-left: 15px; margin-top: 30px; margin-bottom: 20px; text-align: center">(프로필 사진)</p>
                            <input style="width: 300px; height: 40px" type="file" name="image" id="image" placeholder="프로필 사진 첨부">
                        </form>

                        <div style="width: 300px; height: 300px; display: flex; justify-content: center; margin: auto">
                            <img style="width: 100%; height: 100%; display: table-cell; vertical-align: middle" id="preview">
                        </div>

                        <div style="display: flex; justify-content: center; margin-top: 30px" class="member_nickname_input">
                            <input style="width: 300px; height: 200px; padding-left: 15px" type="text" name="introduce" placeholder="자기소개">
                        </div>

                        <div style="display: flex; justify-content: center; margin-top: 30px" class="member_nickname_input">
                            <input style="width: 300px; height: 40px; border-radius: 80px; padding-left: 15px" type="text" name="phone_number" placeholder="휴대폰 번호">
                        </div>

                        <label style="display: flex; justify-content: center; margin-top: 30px" for="date">생년월일 :
                            <input style="margin-left: 10px" type="date"
                                   id="date"
                                   max="2024-12-31"
                                   min="1900-01-01"
                                   value="2024-06-22">
                        </label>

                        <div style="display: flex; justify-content: center; margin-top: 30px">
                            <span style="margin-right: 50px">성별</span>
                            <input type="radio" name="gender" value="man">남
                            <input style="margin-left: 50px" type="radio" name="gender" value="woman">여
                        </div>

                        <div style="display: flex; justify-content: center; margin-top: 30px; margin-bottom: 20px">
                            <input style="width: 250px" type="text" id="sample5_address" placeholder="주소">
                            <input type="button" onclick="sample5_execDaumPostcode()" value="주소 검색"><br>
                        </div>

                        <div id="map" style="width:300px; height:300px; display: flex; justify-content: center; margin: auto"></div>

                        <script>// 지도
                        var mapContainer = document.getElementById('map'), // 지도를 표시할 div
                            mapOption = {
                                center: new daum.maps.LatLng(37.537187, 127.005476), // 지도의 중심좌표
                                level: 5 // 지도의 확대 레벨
                            };

                        //지도를 미리 생성
                        var map = new daum.maps.Map(mapContainer, mapOption);
                        //주소-좌표 변환 객체를 생성
                        var geocoder = new daum.maps.services.Geocoder();
                        //마커를 미리 생성
                        var marker = new daum.maps.Marker({
                            position: new daum.maps.LatLng(37.537187, 127.005476),
                            map: map
                        });


                        function sample5_execDaumPostcode() {
                            new daum.Postcode({
                                oncomplete: function(data) {
                                    var addr = data.address; // 최종 주소 변수

                                    // 주소 정보를 해당 필드에 넣는다.
                                    document.getElementById("sample5_address").value = addr;
                                    // 주소로 상세 정보를 검색
                                    geocoder.addressSearch(data.address, function(results, status) {
                                        // 정상적으로 검색이 완료됐으면
                                        if (status === daum.maps.services.Status.OK) {

                                            var result = results[0]; //첫번째 결과의 값을 활용

                                            // 해당 주소에 대한 좌표를 받아서
                                            var coords = new daum.maps.LatLng(result.y, result.x);
                                            // 지도를 보여준다.
                                            mapContainer.style.display = "block";
                                            map.relayout();
                                            // 지도 중심을 변경한다.
                                            map.setCenter(coords);
                                            // 마커를 결과값으로 받은 위치로 옮긴다.
                                            marker.setPosition(coords)
                                        }
                                    });
                                }
                            }).open();
                        }
                        </script>


                    <div style="" class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">닫기</button>
                        <button type="button" class="btn btn-primary">확인</button>
                    </div>
                </form>
            </div>

        </div>
    </div>
</div>
</body>
</html>